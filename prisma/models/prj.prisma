model Project {
    id               String    @id @default(uuid())
    regNumber        String?
    progress         Decimal?  @default(0)
    plannedStartDate DateTime?
    plannedEndDate   DateTime?
    actualStartDate  DateTime?
    actualEndDate    DateTime?

    contract   Contract? @relation(fields: [contractId], references: [id])
    contractId String?   @unique

    assignee   User?   @relation("Assignee", fields: [assigneeId], references: [id])
    assigneeId String?

    members User[] @relation("ProjectMembers")

    createdBy   User?   @relation("CreatedBy", fields: [createdById], references: [id])
    createdById String?

    updatedBy   User?   @relation("UpdatedBy", fields: [updatedById], references: [id])
    updatedById String?

    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    milestones Milestone[]

    notes    Note[]
    stages   Stage[]
    events   Event[]
    budgets  Budget[]
    expenses Expense[]
}

model Milestone {
    id               String    @id @default(uuid())
    order            Decimal?
    title            String?
    progress         Decimal?  @default(0)
    deliverables     String?
    remarks          String?
    share            Decimal?
    amount           Decimal?
    plannedStartDate DateTime?
    plannedEndDate   DateTime?
    actualStartDate  DateTime?
    actualEndDate    DateTime?

    project   Project? @relation(fields: [projectId], references: [id])
    projectId String?

    assignee   User?   @relation("Assignee", fields: [assigneeId], references: [id])
    assigneeId String?

    createdBy   User?   @relation("CreatedBy", fields: [createdById], references: [id])
    createdById String?

    updatedBy   User?   @relation("UpdatedBy", fields: [updatedById], references: [id])
    updatedById String?

    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    tasks Task[]

    notes  Note[]
    stages Stage[]
}

model Task {
    id               String    @id @default(uuid())
    order            Decimal?
    title            String
    progress         Decimal?  @default(0)
    deliverables     String?
    remarks          String?
    plannedStartDate DateTime?
    plannedEndDate   DateTime?
    actualStartDate  DateTime?
    actualEndDate    DateTime?

    milestone   Milestone @relation(fields: [milestoneId], references: [id])
    milestoneId String

    assignee   User?   @relation("Assignee", fields: [assigneeId], references: [id])
    assigneeId String?

    members User[] @relation("TaskMembers")

    createdBy   User?   @relation("CreatedBy", fields: [createdById], references: [id])
    createdById String?

    updatedBy   User?   @relation("UpdatedBy", fields: [updatedById], references: [id])
    updatedById String?

    createdAt DateTime? @default(now())
    updatedAt DateTime? @updatedAt

    notes    Note[]
    stages   Stage[]
    events   Event[]

    expenses Expense[]
    funds    Fund[]
}
