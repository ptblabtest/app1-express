model User {
  id          String  @id @default(uuid())
  username    String  @unique
  password    String
  displayName String?

  createdAt DateTime? @default(now())
  updatedAt DateTime? @updatedAt

  status String @default("ACTIVE")

  role   Role?   @relation(fields: [roleId], references: [id])
  roleId String?

  BudgetAssignee Budget[] @relation("Assignee")
  CreatorBudget  Budget[] @relation("CreatedBy")
  UpdaterBudget  Budget[] @relation("UpdatedBy")

  FundAssignee Fund[] @relation("Assignee")
  CreatorFund  Fund[] @relation("CreatedBy")
  UpdaterFund  Fund[] @relation("UpdatedBy")

  CreatorExpense Expense[] @relation("CreatedBy")
  UpdaterExpense Expense[] @relation("UpdatedBy")

  PipelineAssignee Pipeline[] @relation("Assignee")
  CreatorPipeline  Pipeline[] @relation("CreatedBy")
  UpdaterPipeline  Pipeline[] @relation("UpdatedBy")
  PipelineMember   Pipeline[] @relation("PipelineMembers")

  ProjectAssignee Project[] @relation("Assignee")
  CreatorProject  Project[] @relation("CreatedBy")
  UpdaterProject  Project[] @relation("UpdatedBy")
  ProjectMember   Project[] @relation("ProjectMembers")

  MilestoneAssignee Milestone[] @relation("Assignee")
  CreatorMilestone  Milestone[] @relation("CreatedBy")
  UpdaterMilestone  Milestone[] @relation("UpdatedBy")

  TaskAssignee Task[] @relation("Assignee")
  CreatorTask  Task[] @relation("CreatedBy")
  UpdaterTask  Task[] @relation("UpdatedBy")
  TaskMember   Task[] @relation("TaskMembers")

  CreatorProduct Product[] @relation("CreatedBy")
  UpdaterProduct Product[] @relation("UpdatedBy")

  CreatorClient Client[] @relation("CreatedBy")
  UpdaterClient Client[] @relation("UpdatedBy")

  CreatorVendor Vendor[] @relation("CreatedBy")
  UpdaterVendor Vendor[] @relation("UpdatedBy")

  CreatorNote Note[] @relation("CreatedBy")
  UpdaterNote Note[] @relation("UpdatedBy")

  CreatorEvent Event[] @relation("CreatedBy")
  UpdaterEvent Event[] @relation("UpdatedBy")

  CreatorStage Stage[] @relation("CreatedBy")
  UpdaterStage Stage[] @relation("UpdatedBy")
}

model Role {
  id    String @id @default(uuid())
  name  String @unique
  level Int

  users User[]
}

model Session {
  sid    String   @id(map: "session_pkey") @db.VarChar
  sess   Json     @db.Json
  expire DateTime @db.Timestamp(6)

  @@index([expire], map: "IDX_session_expire")
}
